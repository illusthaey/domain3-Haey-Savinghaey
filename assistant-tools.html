<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>업무보조 도구 모음</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div id="app-nav"></div>

  <main class="container">
    <h1>업무보조 도구 모음</h1>
    <p class="subtitle">읽기 전용 운영. 템플릿은 GitHub에서 <code>data/store.json</code> 수정.</p>

    <section class="section">
      <h2 class="local-h2">문서 편집 도구</h2>

      <div class="tabs" role="tablist" aria-label="문서 편집 탭">
        <button class="tab" role="tab" id="tab-templates" aria-selected="true" aria-controls="panel-templates">템플릿 문구</button>
        <button class="tab" role="tab" id="tab-clean" aria-selected="false" aria-controls="panel-clean">텍스트 정리</button>
        <button class="tab" role="tab" id="tab-replace" aria-selected="false" aria-controls="panel-replace">찾기/치환</button>
        <button class="tab" role="tab" id="tab-table" aria-selected="false" aria-controls="panel-table">TSV/CSV 표</button>
      </div>

      <div class="tab-panel is-open" role="tabpanel" id="panel-templates" aria-labelledby="tab-templates">
        <div class="card">
          <div class="kv">
            <div class="muted">카테고리</div>
            <select id="tplCategory"></select>

            <div class="muted">템플릿</div>
            <select id="tplItem"></select>
          </div>

          <div class="row wrap right" style="margin-top:10px;">
            <button class="btn" id="btnLoadTemplate">편집기에 적용</button>
            <button class="btn" id="btnCopyEditor">편집기 내용 복사</button>
          </div>

          <div class="muted" style="margin-top:8px;">
            · 템플릿: <code>store.json → templates.categories</code>에서 관리
          </div>
        </div>
      </div>

      <div class="tab-panel" role="tabpanel" id="panel-clean" aria-labelledby="tab-clean">
        <div class="card">
          <div class="row wrap">
            <button class="btn" data-act="trimLines">줄 앞뒤 공백 제거</button>
            <button class="btn" data-act="collapseBlank">연속 공백줄 1줄로</button>
            <button class="btn" data-act="dedupeLines">중복 줄 제거</button>
            <button class="btn" data-act="numberLines">줄 번호 매기기</button>
          </div>
        </div>
      </div>

      <div class="tab-panel" role="tabpanel" id="panel-replace" aria-labelledby="tab-replace">
        <div class="card">
          <div class="kv">
            <div class="muted">찾을 문자열</div>
            <input type="text" id="findText" placeholder="예: (학교명)" />
            <div class="muted">바꿀 문자열</div>
            <input type="text" id="replaceText" placeholder="예: 문막초등학교" />
          </div>

          <div class="row wrap" style="margin-top:10px;">
            <label class="row" style="gap:6px;">
              <input type="checkbox" id="useRegex" />
              <span class="muted">정규식 사용</span>
            </label>
            <label class="row" style="gap:6px;">
              <input type="checkbox" id="ignoreCase" />
              <span class="muted">대소문자 무시</span>
            </label>
            <div style="flex:1;"></div>
            <button class="btn" id="btnReplace">치환 적용</button>
          </div>
        </div>
      </div>

      <div class="tab-panel" role="tabpanel" id="panel-table" aria-labelledby="tab-table">
        <div class="card">
          <div class="row wrap">
            <button class="btn" id="btnParseTSV">TSV(탭) → 표</button>
            <button class="btn" id="btnParseCSV">CSV(쉼표) → 표</button>
          </div>
          <div id="tablePreview" style="margin-top:12px;"></div>
        </div>
      </div>

      <div class="editor-grid" style="margin-top:12px;">
        <div class="editor-box">
          <h3 class="local-h3">편집기</h3>
          <textarea id="editor" placeholder="원문 붙여넣기"></textarea>
        </div>
        <div class="editor-box">
          <h3 class="local-h3">미리보기</h3>
          <textarea id="preview" readonly></textarea>
        </div>
      </div>
    </section>
  </main>

  <script src="/static/app.js"></script>
  <script src="/static/doc_tools.js"></script>
  <script>
    App.mountHeader();
    DocTools.init().catch(console.error);
  </script>

  <script src="/static/footer.js"></script>
  <script src="/static/disable-copy.js"></script>
  <script src="/static/global-loader.js?v=1"></script>
</body>
</html>
